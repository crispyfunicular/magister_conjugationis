<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magister Conjugationis</title>
    <meta name="description" content="Maîtriser les conjugaisons latines grâce à des exercices personnalisables par temps, personne, voix, mode ou encore groupe de verbes. Amo, capiebantur, deleuissetis... l'apprentissage de la conjugaison latine devient un vrai jeu d'enfant !">
    <link rel="icon" href="favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="logo.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=Spectral:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <meta name="google-site-verification" content="Pe14zk1FCKYU4tnsIloL9GFksk-Zcdwxr6ugZ3AC1io" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              display: ["Spectral", "serif"],
              body: ["Manrope", "sans-serif"],
            },
            colors: {
              ink: "#1d1b1a",
              parchment: "#f6f1e8",
              ember: "#c64b2a",
              olive: "#4a5d3c",
              dusk: "#2b2d38",
            },
            boxShadow: {
              glow: "0 20px 60px -25px rgba(198, 75, 42, 0.55)",
              soft: "0 20px 50px -30px rgba(29, 27, 26, 0.6)",
            },
            animation: {
              "float-slow": "float-slow 14s ease-in-out infinite",
              "fade-in": "fade-in 0.7s ease-out",
              "slide-up": "slide-up 0.6s ease-out",
            },
            keyframes: {
              "float-slow": {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-12px)" },
              },
              "fade-in": {
                "0%": { opacity: 0 },
                "100%": { opacity: 1 },
              },
              "slide-up": {
                "0%": { opacity: 0, transform: "translateY(18px)" },
                "100%": { opacity: 1, transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <style>
      :root {
        color-scheme: light;
      }

      body {
        font-family: "Manrope", sans-serif;
        background: radial-gradient(
            circle at top,
            rgba(198, 75, 42, 0.18),
            transparent 60%
          ),
          linear-gradient(120deg, #f6f1e8 0%, #f4ece0 45%, #efe7d8 100%);
        color: #1d1b1a;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image: radial-gradient(
            rgba(29, 27, 26, 0.08) 1px,
            transparent 1px
          ),
          radial-gradient(rgba(198, 75, 42, 0.08) 1px, transparent 1px);
        background-size: 42px 42px, 90px 90px;
        background-position: 0 0, 24px 32px;
        pointer-events: none;
        opacity: 0.35;
        z-index: -1;
      }

      [x-cloak] {
        display: none !important;
      }

      .card {
        background: rgba(255, 255, 255, 0.78);
        border: 1px solid rgba(29, 27, 26, 0.1);
        backdrop-filter: blur(12px);
      }

      .chip {
        background: rgba(29, 27, 26, 0.06);
        border: 1px solid rgba(29, 27, 26, 0.1);
      }

      .ringed {
        box-shadow: 0 0 0 1px rgba(29, 27, 26, 0.12) inset;
      }

      .btn-primary {
        background: #c64b2a;
        color: #ffffff;
      }

      .btn-primary:hover {
        filter: brightness(0.95);
      }

      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <div
      class="min-h-screen flex flex-col"
      x-data="conjugationApp()"
      x-init="init()"
      x-cloak
    >
      <header class="px-6 py-6">
        <nav
          class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-4"
        >
          <button
            type="button"
            class="flex items-center gap-2 pl-3 text-left"
            @click="screen = 'setup'"
          >
            <div
              class="flex h-[4.75rem] w-[4.75rem] items-center justify-center rounded-full bg-ink text-parchment shadow-glow"
            >
              <img
                src="logo.png"
                alt="Magister Conjugationis - Maîtriser les conjugaisons latines"
                class="h-[4.1rem] w-[4.1rem] rounded-full object-cover"
              />
            </div>
            <div>
              <p class="text-sm uppercase tracking-[0.3em] text-olive">
                Magister
              </p>
              <h1
                class="font-display text-2xl font-semibold text-ink md:text-3xl"
              >
                Conjugationis
              </h1>
            </div>
          </button>

          <div class="flex items-center gap-4 text-sm font-medium">
            <a
              class="flex items-center gap-2 rounded-full border border-ink/10 bg-white/70 px-4 py-2 transition hover:-translate-y-0.5 hover:border-ink/30"
              href="conjugaisons_latines.pdf"
              target="_blank"
              rel="noreferrer"
            >
              <i class="ph ph-books"></i>
              PDF conjugaisons latines
            </a>
            <a
              class="hidden items-center gap-2 rounded-full border border-ink/10 bg-white/70 px-4 py-2 transition hover:-translate-y-0.5 hover:border-ink/30 md:flex"
              href="https://dep-lettresclassiques.parisnanterre.fr/diplomes-universitaires/diplome-universitaire-de-competences-en-langues-anciennes-ducla"
              target="_blank"
              rel="noreferrer"
            >
              <i class="ph ph-graduation-cap"></i>
              Diplôme universitaire
            </a>
            <a
              class="flex items-center gap-2 rounded-full border border-ink/10 bg-white/70 px-4 py-2 transition hover:-translate-y-0.5 hover:border-ink/30"
              href="https://github.com/crispyfunicular/magister_conjugationis"
              target="_blank"
              rel="noreferrer"
            >
              <i class="ph ph-github-logo"></i>
              GitHub
            </a>
          </div>
        </nav>
      </header>

      <main class="flex-1 px-6 pb-16">
        <div class="mx-auto flex w-full max-w-6xl flex-col gap-10">
          <section
            class="card animate-fade-in rounded-[28px] p-8 shadow-soft"
            x-show="screen === 'setup'"
          >
            <div class="flex flex-col gap-6 lg:flex-row lg:items-start">
              <div class="flex-1 space-y-4">
                <p class="text-sm uppercase tracking-[0.3em] text-olive">
                  Préparer la session
                </p>
                <p class="text-base text-ink/70">
                  Choisissez le nombre de verbes et les filtres pour créer une
                  session sur mesure.
                </p>
              </div>
            </div>

            <div class="mt-10 grid gap-6 lg:grid-cols-[1.2fr,1fr]">
              <div class="space-y-6">
                <div class="grid gap-4 md:grid-cols-2">
                  <label class="block">
                    <span class="text-sm font-semibold text-ink">
                      Nombre de verbes (0-100)
                    </span>
                    <input
                      class="mt-2 w-full rounded-2xl border border-ink/10 bg-white/80 px-4 py-3 text-lg shadow-sm focus:border-ember focus:outline-none focus:ring-2 focus:ring-ember/30"
                      type="number"
                      min="0"
                      max="100"
                      x-model.number="session.count"
                    />
                  </label>

                  <label class="block">
                    <span class="text-sm font-semibold text-ink">Direction</span>
                    <select
                      class="mt-2 w-full rounded-2xl border border-ink/10 bg-white/80 px-4 py-3 text-lg shadow-sm focus:border-ember focus:outline-none focus:ring-2 focus:ring-ember/30"
                      x-model="session.direction"
                    >
                      <option value="aleatoire">Aléatoire</option>
                      <option value="latin">Latin → français</option>
                      <option value="français">Français → latin</option>
                    </select>
                  </label>
                </div>

                <div class="grid gap-5">
                  <div class="space-y-2">
                    <span class="text-sm font-semibold text-ink">Temps</span>
                    <div class="flex flex-wrap gap-2">
                      <template x-for="tense in tenses" :key="tense">
                        <label
                          class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                        >
                          <input
                            type="checkbox"
                            class="h-4 w-4 accent-ember"
                            :value="tense"
                            x-model="session.tenses"
                          />
                          <span x-text="tense"></span>
                        </label>
                      </template>
                    </div>
                  </div>

                  <div class="space-y-2">
                    <span class="text-sm font-semibold text-ink">Mode</span>
                    <div class="flex flex-wrap gap-2">
                      <label
                        class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                      >
                        <input
                          type="checkbox"
                          class="h-4 w-4 accent-ember"
                          value="indicatif"
                          x-model="session.moods"
                        />
                        indicatif
                      </label>
                      <label
                        class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                      >
                        <input
                          type="checkbox"
                          class="h-4 w-4 accent-ember"
                          value="subjonctif"
                          x-model="session.moods"
                        />
                        subjonctif
                      </label>
                    </div>
                  </div>

                  <div class="space-y-2">
                    <span class="text-sm font-semibold text-ink">Voix</span>
                    <div class="flex flex-wrap gap-2">
                      <label
                        class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                      >
                        <input
                          type="checkbox"
                          class="h-4 w-4 accent-ember"
                          value="actif"
                          x-model="session.voices"
                        />
                        actif
                      </label>
                      <label
                        class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                      >
                        <input
                          type="checkbox"
                          class="h-4 w-4 accent-ember"
                          value="passif"
                          x-model="session.voices"
                        />
                        passif
                      </label>
                      <label
                        class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                      >
                        <input
                          type="checkbox"
                          class="h-4 w-4 accent-ember"
                          value="déponent"
                          x-model="session.voices"
                        />
                        déponent
                      </label>
                    </div>
                  </div>

                  <div class="space-y-2">
                    <span class="text-sm font-semibold text-ink">Personne</span>
                    <div class="flex flex-wrap gap-2">
                      <template x-for="person in personOptions" :key="person.value">
                        <label
                          class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                        >
                          <input
                            type="checkbox"
                            class="h-4 w-4 accent-ember"
                            :value="person.value"
                            x-model="session.persons"
                          />
                          <span x-text="person.label"></span>
                        </label>
                      </template>
                    </div>
                  </div>

                  <div class="space-y-2">
                    <span class="text-sm font-semibold text-ink">Groupe</span>
                    <div class="flex flex-wrap gap-2">
                      <template x-for="group in groups" :key="group">
                        <label
                          class="ringed inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm font-medium text-ink"
                        >
                          <input
                            type="checkbox"
                            class="h-4 w-4 accent-ember"
                            :value="group"
                            x-model="session.groups"
                          />
                          <span x-text="group"></span>
                        </label>
                      </template>
                    </div>
                  </div>

                  <div class="-mt-4 rounded-2xl bg-ink/5 p-4 text-xs text-ink/70">
                    <div class="mt-2 grid gap-1">
                      <p>0 : sum, es, esse, fui</p>
                      <p>1 : amo, amas amare, amaui, amatum</p>
                      <p>2 : deleo, deles, delere, deleui, deletum</p>
                      <p>3 : lego, legis, legere, legi, lectum</p>
                      <p>4 : capio, capis, capere, cepi, captum</p>
                      <p>5 : audio, audis, audire, audiui, auditum</p>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-4">
                  <p class="text-sm text-ink/60" x-show="isLoading">
                    Chargement des verbes...
                  </p>
                  <p class="text-sm text-ember" x-text="loadError"></p>
                </div>
              </div>

              <div
                class="card animate-float-slow rounded-[24px] border border-ember/20 p-6"
              >
                <h3 class="mt-3 font-display text-2xl font-semibold text-ink">
                  Session personnalisée
                </h3>
                <ul class="mt-4 space-y-3 text-sm text-ink/70">
                  <li class="flex items-center gap-2">
                    <i class="ph ph-stack"></i>
                    <span
                      x-text="`${session.count} verbes, direction ${directionLabel}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-database"></i>
                    <span
                      x-text="`Questions disponibles: ${filteredCount} / ${totalCount}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-timer"></i>
                    <span
                      x-text="`Temps: ${selectedTensesLabel}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-activity"></i>
                    <span
                      x-text="`Mode: ${selectedMoodsLabel}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-sparkle"></i>
                    <span
                      x-text="`Voix: ${selectedVoicesLabel}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-users"></i>
                    <span
                      x-text="`Personne: ${selectedPersonsLabel}`"
                    ></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <i class="ph ph-anchor"></i>
                    <span
                      x-text="`Groupe: ${selectedGroupsLabel}`"
                    ></span>
                  </li>
                </ul>

                <div class="mt-6">
                  <button
                    class="btn-primary inline-flex items-center gap-2 rounded-full bg-ember px-6 py-3 text-sm font-semibold text-white shadow-glow transition hover:-translate-y-0.5"
                    @click="startSession"
                    :disabled="isLoading || filteredCount === 0"
                  >
                    <i class="ph ph-play"></i>
                    Démarrer la session
                  </button>
                </div>


                <div
                  class="mt-6 rounded-2xl bg-ink/5 p-4 text-sm text-ink/70"
                  x-show="filteredCount === 0"
                >
                  <p>
                    Si aucun verbe ne correspond, ajustez les filtres.
                  </p>
                </div>
              </div>
            </div>
          </section>

          <section
            class="card animate-slide-up rounded-[28px] p-8 shadow-soft"
            x-show="screen === 'quiz'"
          >
            <div class="flex flex-wrap items-center justify-between gap-4">
              <div>
                <h2 class="font-display text-3xl font-semibold text-ink">
                  <span x-text="`Question ${quiz.roundIndex + 1}/${quiz.totalRounds}`"></span>
                </h2>
              </div>

              <div class="flex flex-col items-end gap-2 text-sm text-ink/70">
                <span class="chip rounded-full px-4 py-2">
                  Score: <span x-text="scoreLabel"></span>
                </span>
                <span class="chip rounded-full px-4 py-2">
                  <span x-text="`Questions disponibles: ${pool.length}`"></span>
                </span>
              </div>
            </div>

            <div class="mt-8 space-y-6" x-show="quiz.current">
              <div class="space-y-6">
                <div
                  class="rounded-[22px] border border-ink/10 bg-white/70 p-6"
                >
                  <template x-if="quiz.current && quiz.current.direction === 'latin'">
                    <div class="space-y-3">
                      <p class="text-sm uppercase tracking-[0.3em] text-ember">
                        Latin → français
                      </p>
                      <h3 class="font-display text-4xl font-semibold text-ink">
                        <span x-text="quiz.current.verb.latin"></span>
                      </h3>
                    </div>
                  </template>

                  <template
                    x-if="quiz.current && quiz.current.direction === 'français'"
                  >
                    <div class="space-y-3">
                      <p class="text-sm uppercase tracking-[0.3em] text-ember">
                        Français → latin
                      </p>
                      <h3 class="font-display text-2xl text-ink">
                        <span class="font-semibold">Indiquer la traduction pour :</span>
                        <span
                          class="font-semibold"
                          x-text="quiz.current.verb.translation.join(', ')"
                        ></span>
                      </h3>
                      <div class="grid gap-2 text-sm text-ink/70 sm:grid-cols-2">
                        <p>
                          <span class="font-semibold text-ink">Personne:</span>
                          <span x-text="formatPerson(quiz.current.verb.person)"></span>
                        </p>
                        <p>
                          <span class="font-semibold text-ink">Temps:</span>
                          <span x-text="quiz.current.verb.tense"></span>
                        </p>
                        <p>
                          <span class="font-semibold text-ink">Voix:</span>
                          <span x-text="quiz.current.verb.voice"></span>
                        </p>
                        <p>
                          <span class="font-semibold text-ink">Mode:</span>
                          <span x-text="quiz.current.verb.mood"></span>
                        </p>
                      </div>
                    </div>
                  </template>
                </div>

                <div
                  class="rounded-[22px] border border-ink/10 bg-white/70 p-6"
                  x-show="quiz.current && quiz.current.direction === 'latin'"
                >
                  <div class="grid gap-6 lg:grid-cols-2">
                    <div>
                      <h4 class="text-lg font-semibold text-ink">Personne</h4>
                      <div class="mt-3 grid gap-3 md:grid-cols-2">
                        <div class="space-y-3">
                          <template x-for="personValue in personColumns.left" :key="personValue">
                            <label
                              class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                              :class="isPersonDisabled(personValue) ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                            >
                              <input
                                type="radio"
                                class="h-4 w-4 accent-ember"
                                name="latin-person"
                                :value="personValue"
                                :disabled="isPersonDisabled(personValue)"
                                x-model="quiz.latinSelections.person"
                              />
                              <span class="text-sm font-medium text-ink" x-text="formatPerson(personValue)"></span>
                            </label>
                          </template>
                        </div>
                        <div class="space-y-3">
                          <template x-for="personValue in personColumns.right" :key="personValue">
                            <label
                              class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                              :class="isPersonDisabled(personValue) ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                            >
                              <input
                                type="radio"
                                class="h-4 w-4 accent-ember"
                                name="latin-person"
                                :value="personValue"
                                :disabled="isPersonDisabled(personValue)"
                                x-model="quiz.latinSelections.person"
                              />
                              <span class="text-sm font-medium text-ink" x-text="formatPerson(personValue)"></span>
                            </label>
                          </template>
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 class="text-lg font-semibold text-ink">Temps</h4>
                      <div class="mt-3 grid gap-3 md:grid-cols-2">
                        <div class="space-y-3">
                          <template x-for="tense in tenseColumns.left" :key="tense">
                            <label
                              class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                              :class="isTenseDisabled(tense) ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                            >
                              <input
                                type="radio"
                                class="h-4 w-4 accent-ember"
                                name="latin-tense"
                                :value="tense"
                                :disabled="isTenseDisabled(tense)"
                                x-model="quiz.latinSelections.tense"
                              />
                              <span class="text-sm font-medium text-ink" x-text="tense"></span>
                            </label>
                          </template>
                        </div>
                        <div class="space-y-3">
                          <template x-for="tense in tenseColumns.right" :key="tense">
                            <label
                              class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                              :class="isTenseDisabled(tense) ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                            >
                              <input
                                type="radio"
                                class="h-4 w-4 accent-ember"
                                name="latin-tense"
                                :value="tense"
                                :disabled="isTenseDisabled(tense)"
                                x-model="quiz.latinSelections.tense"
                              />
                              <span class="text-sm font-medium text-ink" x-text="tense"></span>
                            </label>
                          </template>
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 class="text-lg font-semibold text-ink">Voix</h4>
                      <div class="mt-3 grid gap-3 md:grid-cols-3">
                        <label
                          class="ringed flex cursor-pointer items-center gap-2 rounded-2xl border border-transparent bg-white/70 px-3 py-2 text-xs transition"
                          :class="!allowedVoices.includes('actif') ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                        >
                          <input
                            type="radio"
                            class="h-4 w-4 accent-ember"
                            name="latin-voice"
                            value="actif"
                            :disabled="!allowedVoices.includes('actif')"
                            x-model="quiz.latinSelections.voice"
                          />
                          <span class="text-sm font-medium text-ink">actif</span>
                        </label>
                        <label
                          class="ringed flex cursor-pointer items-center gap-2 rounded-2xl border border-transparent bg-white/70 px-3 py-2 text-xs transition"
                          :class="!allowedVoices.includes('passif') ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                        >
                          <input
                            type="radio"
                            class="h-4 w-4 accent-ember"
                            name="latin-voice"
                            value="passif"
                            :disabled="!allowedVoices.includes('passif')"
                            x-model="quiz.latinSelections.voice"
                          />
                          <span class="text-sm font-medium text-ink">passif</span>
                        </label>
                        <label
                          class="ringed flex cursor-pointer items-center gap-2 rounded-2xl border border-transparent bg-white/70 px-3 py-2 text-xs transition"
                          :class="!allowedVoices.includes('déponent') ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                        >
                          <input
                            type="radio"
                            class="h-4 w-4 accent-ember"
                            name="latin-voice"
                            value="déponent"
                            :disabled="!allowedVoices.includes('déponent')"
                            x-model="quiz.latinSelections.voice"
                          />
                          <span class="text-sm font-medium text-ink">déponent</span>
                        </label>
                      </div>
                    </div>

                    <div>
                      <h4 class="text-lg font-semibold text-ink">Mode</h4>
                      <div class="mt-3 grid gap-3 md:grid-cols-2">
                        <label
                          class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                          :class="!allowedMoods.includes('indicatif') ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                        >
                          <input
                            type="radio"
                            class="h-4 w-4 accent-ember"
                            name="latin-mood"
                            value="indicatif"
                            :disabled="!allowedMoods.includes('indicatif')"
                            x-model="quiz.latinSelections.mood"
                          />
                          <span class="text-sm font-medium text-ink">indicatif</span>
                        </label>
                        <label
                          class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition"
                          :class="!allowedMoods.includes('subjonctif') ? 'opacity-40 cursor-not-allowed' : 'hover:border-ember/40'"
                        >
                          <input
                            type="radio"
                            class="h-4 w-4 accent-ember"
                            name="latin-mood"
                            value="subjonctif"
                            :disabled="!allowedMoods.includes('subjonctif')"
                            x-model="quiz.latinSelections.mood"
                          />
                          <span class="text-sm font-medium text-ink">subjonctif</span>
                        </label>
                      </div>
                    </div>

                    <div class="lg:col-span-2">
                      <h4 class="text-lg font-semibold text-ink">
                        Traduction (infinitif)
                      </h4>
                      <div class="mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-3">
                        <template x-for="option in quiz.translationOptions" :key="option.value">
                          <label
                            class="ringed flex cursor-pointer items-center gap-3 rounded-2xl border border-transparent bg-white/70 px-4 py-3 transition hover:border-ember/40"
                          >
                            <input
                              type="radio"
                              class="h-4 w-4 accent-ember"
                              name="latin-translation"
                              :value="option.value"
                              x-model="quiz.latinSelections.translation"
                            />
                            <span class="text-sm font-medium text-ink" x-text="option.label"></span>
                          </label>
                        </template>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex flex-wrap items-center justify-end gap-3">
                    <button
                      class="btn-primary rounded-full bg-ink px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:-translate-y-0.5"
                      @click="submitLatinBundle"
                    >
                      Valider
                    </button>
                  </div>

                  <div class="mt-4" x-show="quiz.feedback">
                    <p
                      class="text-sm font-semibold"
                      :class="quiz.feedback.type === 'success' ? 'text-olive' : 'text-ember'"
                      x-text="quiz.feedback.message"
                    ></p>
                  </div>

                </div>

                <div
                  class="rounded-[22px] border border-ink/10 bg-white/70 p-6"
                  x-show="quiz.current && quiz.current.direction === 'français'"
                >
                  <label class="block text-sm font-semibold text-ink">
                    Forme fléchie en latin
                  </label>
                  <input
                    class="mt-3 w-full rounded-2xl border border-ink/10 bg-white/80 px-4 py-3 text-lg shadow-sm focus:border-ember focus:outline-none focus:ring-2 focus:ring-ember/30"
                    type="text"
                    placeholder="Ex: amabimus"
                    x-model="quiz.inputAnswer"
                  />

                  <div class="mt-5 flex flex-wrap items-center justify-end gap-3">
                    <button
                      class="btn-primary rounded-full bg-ink px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:-translate-y-0.5"
                      @click="submitLatinAnswer"
                    >
                      Valider
                    </button>
                  </div>

                  <div class="mt-4" x-show="quiz.feedback">
                    <p
                      class="text-sm font-semibold"
                      :class="quiz.feedback.type === 'success' ? 'text-olive' : 'text-ember'"
                      x-text="quiz.feedback.message"
                    ></p>
                  </div>

                </div>
              </div>
              </aside>
            </div>
          </section>

          <section
            class="card animate-fade-in rounded-[28px] p-8 shadow-soft"
            x-show="screen === 'summary'"
          >
            <div class="space-y-4">
              <p class="text-sm uppercase tracking-[0.3em] text-olive">
                Session terminée
              </p>
              <p class="text-lg text-ink/70 text-center">
                <span x-text="`Score total : ${scoreLabel}`"></span>
              </p>
            </div>

            <div class="mt-8 flex flex-wrap justify-end gap-3">
              <button
                class="btn-primary rounded-full bg-ember px-6 py-3 font-semibold text-white shadow-glow transition hover:-translate-y-0.5"
                @click="resetSession"
              >
                Nouvelle session
              </button>
            </div>
          </section>
        </div>
      </main>

      <footer class="px-6 pb-10 text-center text-sm text-ink/60">
        <a
          class="transition hover:text-ink"
          href="https://www.linkedin.com/in/morgane-bona-pellissier-0648aa112/"
          target="_blank"
          rel="noreferrer"
        >
          Réalisé par Morgane Bona-Pellissier
        </a>
      </footer>

      <div
        class="fixed inset-0 z-50 flex items-center justify-center bg-ink/60 px-4 backdrop-blur-sm"
        x-show="quiz.showHintsModal"
        @click.self="quiz.revealed ? null : (quiz.showHintsModal = false)"
      >
        <div class="card w-full max-w-lg rounded-[24px] border border-ember/30 bg-white/95 p-6 shadow-[0_30px_80px_-40px_rgba(29,27,26,0.8)]">
          <div x-show="!quiz.revealed">
            <p class="text-xs uppercase tracking-[0.3em] text-olive">
              Errare humanum est...
            </p>
            <h4 class="mt-3 font-display text-2xl font-semibold text-ink">
              Besoin d'un coup de pouce ?
            </h4>
            <p class="mt-2 text-sm text-ink/70">
              Choisissez une action pour avancer.
            </p>

            <div class="mt-4 space-y-2" x-show="quiz.showPrimitives && !quiz.revealed">
              <p class="text-sm font-semibold text-ink">Temps primitifs</p>
              <p class="text-sm text-ink/70" x-text="quiz.current?.verb['primitive tenses']"></p>
            </div>

            <div class="mt-4 space-y-2" x-show="quiz.showLemma && !quiz.revealed">
              <p class="text-sm font-semibold text-ink">Lemme</p>
              <p class="text-sm text-ink/70" x-text="quiz.current?.verb.lemma"></p>
            </div>

            <div class="mt-5 space-y-2">
              <div class="flex flex-wrap gap-2">
                <button
                  class="rounded-full border border-ink/10 bg-white px-4 py-2 text-xs font-semibold text-ink/80"
                  @click="showPrimitives"
                  x-show="!quiz.showPrimitives"
                >
                  Voir les temps primitifs
                </button>
                <button
                  class="rounded-full border border-ink/10 bg-white px-4 py-2 text-xs font-semibold text-ink/80"
                  @click="showLemma"
                  x-show="quiz.current && quiz.current.direction === 'français' && !quiz.showLemma"
                >
                  Voir le lemme
                </button>
              </div>
              <div class="flex flex-wrap justify-end gap-2">
                <button
                  class="rounded-full border border-ink/10 bg-white px-4 py-2 text-xs font-semibold text-ink/80"
                  @click="quiz.current?.direction === 'latin' ? retryLatinBundle() : retryLatinAnswer()"
                >
                  Réessayer
                </button>
                <button
                  class="rounded-full border border-ink/10 bg-white px-4 py-2 text-xs font-semibold text-ink/80"
                  @click="quiz.current?.direction === 'latin' ? revealLatinBundle() : revealLatinAnswer()"
                >
                  Voir la réponse
                </button>
              </div>
            </div>
          </div>

          <div class="mt-4 space-y-3" x-show="quiz.revealed">
            <p class="text-sm font-semibold text-ink">Réponse</p>
            <div class="grid gap-4 md:grid-cols-2">
              <div class="rounded-2xl border border-ink/10 bg-white/80 p-4">
                <template x-if="quiz.current && quiz.current.direction === 'latin'">
                  <p class="font-display text-2xl font-semibold text-ink" x-text="quiz.current.verb.latin"></p>
                </template>
                <template x-if="quiz.current && quiz.current.direction === 'français'">
                  <ul class="space-y-1 text-sm text-ink/70">
                    <li><span class="font-semibold">Traduction:</span> <span x-text="latinCorrectAnswers.translation"></span></li>
                    <li><span class="font-semibold">Temps:</span> <span x-text="latinCorrectAnswers.tense"></span></li>
                    <li><span class="font-semibold">Personne:</span> <span x-text="latinCorrectAnswers.person"></span></li>
                    <li><span class="font-semibold">Mode:</span> <span x-text="latinCorrectAnswers.mood"></span></li>
                    <li><span class="font-semibold">Voix:</span> <span x-text="latinCorrectAnswers.voice"></span></li>
                    <li><span class="font-semibold">Temps primitifs:</span> <span x-text="quiz.current.verb['primitive tenses']"></span></li>
                    <li><span class="font-semibold">Groupe:</span> <span x-text="quiz.current.verb.group"></span></li>
                  </ul>
                </template>
              </div>
              <div class="rounded-2xl border border-ink/10 bg-white/80 p-4">
                <template x-if="quiz.current && quiz.current.direction === 'latin'">
                  <ul class="space-y-1 text-sm text-ink/70">
                    <li><span class="font-semibold">Traduction:</span> <span x-text="latinCorrectAnswers.translation"></span></li>
                    <li><span class="font-semibold">Temps:</span> <span x-text="latinCorrectAnswers.tense"></span></li>
                    <li><span class="font-semibold">Personne:</span> <span x-text="latinCorrectAnswers.person"></span></li>
                    <li><span class="font-semibold">Mode:</span> <span x-text="latinCorrectAnswers.mood"></span></li>
                    <li><span class="font-semibold">Voix:</span> <span x-text="latinCorrectAnswers.voice"></span></li>
                    <li><span class="font-semibold">Temps primitifs:</span> <span x-text="quiz.current.verb['primitive tenses']"></span></li>
                    <li><span class="font-semibold">Groupe:</span> <span x-text="quiz.current.verb.group"></span></li>
                  </ul>
                </template>
                <template x-if="quiz.current && quiz.current.direction === 'français'">
                  <p class="font-display text-2xl font-semibold text-ink" x-text="quiz.current.verb.latin"></p>
                </template>
              </div>
            </div>
            <div class="mt-3 flex justify-end">
              <button
                class="btn-primary rounded-full bg-ember px-4 py-2 text-xs font-semibold text-white"
                @click="advanceAfterReveal"
              >
                Continuer
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="verbs_latin.js"></script>
    <script src="app.js"></script>
  </body>
</html>
